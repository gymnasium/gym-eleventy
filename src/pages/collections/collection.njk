---js
{
  layout: "layouts/main.njk",
  pagination: {
    data: "collection",
    size: 1,
    alias: "item",
    resolve: "values",
    before: function(data) {
      const items = data.filter(x => !x.exclude);
      return items;
    },
    addAllPagesToCollections: true,
  },
  permalink: "/{{ item.title | slugify }}/",
  eleventyComputed: {
    title: "{{ item.title }} | Collections",
    description: "{{ item.description | strip_html }}",
    sitemapExclude: function(data) {
      const bool = data.item.sitemapExclude ? data.item.sitemapExclude : false;
      return bool;
    },
    redirectFrom: function(data) {
      return data.item.redirectFrom;
    }
  },
}
---

<h1>{{ item.title }}</h1>
<h4>{{ item.id }}</h4>
<p>{{ item.description }}</p>

{# Here we're omitting some object keys to be able to loop through the content fields #}
{%- set content = item | omit(['id', 'title', 'topic', 'description', 'slug', 'order', 'redirectFrom', 'exclude', 'sitemapExclude', 'tags', 'category', 'categories']) -%}

{%- if content -%}
  {%- for key, section in content -%}
  <section id="{{ key }}">
    <h2>{{ section.heading }}</h2>
    {%- if section.links -%}
      <ul>
      {%- for idx in range(0, section.links.length) -%}
        <li>{%- external_link section.links[idx].url,section.links[idx].label -%}</li>
      {%- endfor -%}
      </ul>
    {%- endif -%}
  </section>
  {%- endfor -%}
{%- endif -%}