{%- set obj = collections.catalog[filteredId] -%}
{%- set img = obj.img -%}
{%- set title = obj.title | strip_html -%}

{%- if obj.subtitle -%}
  {%- set subtitle = obj.subtitle | strip_html -%}
{%- elif module.subtitle -%}

  {%- if module.subtitle | is_string -%}
    {%- set subtitle = module.subtitle -%}
  {%- elif module.subtitle | is_object -%}
    {% set key = module.subtitle.key %}
    {% set collect = collections[module.subtitle.data] %}
    {{collect.key}}

    {%- set subtitle -%}{%- if module.subtitle['pre'] -%}{{ module.subtitle['pre'] }} {% endif -%}{{ bios[obj.instructor]['name'] }}{%- if module.subtitle['post'] -%} {{ module.subtitle['post'] }}{% endif -%}{%- endset -%}
  {%- endif -%}
{%- endif -%}

{%- set topic = obj.topic -%}
{%- set topic_featured = obj.topic_featured-%}
{%- set subtopics = obj.subtopics -%}
{%- set description = obj.description -%}

{%- if obj.slug -%}
  {%- set slug = obj.slug -%}
{%- else -%}
  {%- set slug = title | slugify -%}
{%- endif -%}

{%- set shortId = obj.id -%}
{%- set type = obj.type -%}

{%- set src = img -%}
{%- set srcSet = src -%}

{%- set url = obj.id | course_endpoint('course_about') -%}

{%- set baseClass = "course " + type + ' ' + shortId | lower -%}

{%- if not topicClass -%}
  {%- set topicClass = topic | slugify -%}
{%- endif -%}

{%- if not subtopicClass -%}
  {%- set subtopicClass -%}
  {% if subtopics %}{% for subtopic in subtopics %} {{ subtopic.label | slugify }}{% endfor %}{% endif %}
  {%- endset -%}
{%- endif -%}

{%- set itemClass %}{{ baseClass }} {{ topicClass }} {{ subtopicClass }} {% if topic_featured %} featured{% endif %} {% if extraClass %} {{ extraClass }}{% endif %}
{%- endset -%}

<section class="section" id="{{ section_id }}">
  <div class="section-content">
    <header>
      <h1 class="caps">{{ title }}</h1>
      <p class="instructor">with {{ bios[obj.instructor]['name'] }}, {{  bios[obj.instructor]['subtitle'] }}</p>
    </header>
    <div class="row">
      <div class="col-md-3">
        <img alt="Course artwork for {{ title }}." src="{{ src }}" srcset="{{ srcSet }}" decoding="async" fetchpriority="high" width="574" height="488">
      </div>
      <div class="col-sm-8 col-md-5 cta-view">
        <p class="description">{{ description }}</p>
        <a class="btn" href="{{ url }}">View Course</a>
      </div>
    </div>
    <div class="row row-info">
      <div class="col-sm-5 col-md-3">
        {%- if (obj.skills) -%}
        <h3 class="caps">Skills Covered</h3>
        <ul>
          {%- for i in range(0, obj.skills.length) -%}
          <li>{{ obj.skills[i].label }}</li>
          {%- endfor -%}
        </ul>
        {%- endif -%}
      </div>
      <div class="col-sm-6 col-md-5">

        {%- if (obj.audience) -%}
          <h3 class="caps">This Course is For</h3>
          <ul>
            {%- for i in range(0, obj.audience.length) -%}
            <li>{{ obj.audience[i].label }}</li>
            {%- endfor -%}
          </ul>
        {%- endif -%}
      </div>
    </div>
  </div>
</section>
<footer class="back-to">
  <p><a href="#main">Back to Top</a></p>
</footer>