@use 'base/breakpoints' as *;
@use 'base/functions' as *;
@use 'base/mixins' as *;
@use 'base/fonts' as *;

/* TODO: this was added brute-force to match what we have in gymcms. All of this should be refactored for cleaner code (and no custom css file include) */

// Adds grid support with fallbacks
@mixin grid-support {
  .cols {
    margin-top: 1.4rem;
  }
  // --- legacy columns (inline-block) w/ breakpoints
  .cols > ul {
    list-style: none;
    padding-top: 0;
    padding-bottom: 0;
    padding-left: 0;
    margin-top: 0;
    margin-bottom: 0;
  }

  .cols ul > li {
    overflow: hidden;
  }

  @include breakpoint(40em, min) {
    .cols {
      padding-bottom: 0;
      overflow: hidden;

      > ul {
        margin-left: -0.6rem;
        margin-right: -0.6rem;

        li {
          display: inline-block;
          width: 50%;
          vertical-align: top;
          box-sizing: border-box;
          padding-left: .6rem;
          padding-right: .6rem;
          margin-top: 1.2rem;
          margin-right: -4px;
        }
      }
    }
  }

  @include breakpoint(58em, min) {
    .cols > ul li {
      width: 50%;
    }
  }

  @include breakpoint(64em, min) {
    .cols > ul li {
      width: 33.333333333333333%;
    }

    // Hide 4th panel if it exists; see featured-courses.html
    .list-featured-courses li:last-child {
      display: none;
    }
  }

  @include breakpoint(78em, min) {
    .cols ul li {
      width: 25%;
    }

    .cols ul li:last-child {
      display: inline-block;
    }
  }

  // --- modern columns (grid)
  @supports (display: grid) {

    .cols > ul {
      display: grid;
      grid-template-columns: auto;
      grid-gap: 1.2rem;
    }

    @include breakpoint(36em, min) {
      .cols > ul {
        grid-template-columns: repeat(auto-fit, minmax(19.25em, 1fr));
      }

      .cols-max-2 ul {
        grid-template-columns: repeat(auto-fill, minmax(24em, 1fr));
      }

      .cols-max-3 ul {
        grid-template-columns: repeat(auto-fill, minmax(20em, 1fr));
      }
    }

   // Hide 4th panel if it exists; see featured-courses.html
    @include breakpoint(62em, min) {
      .list-featured-courses li:last-child {
        display: none;
      }
    }

    @include breakpoint(78em, min) {
      .cols ul li:last-child {
        display: inherit;
      }
    }

    // override -- legacy layout -- start

    .cols,
    .cols > ul li {
      overflow: visible;
    }

    .cols > ul,
    .cols > ul li {
      margin-top: 0;
      margin-right: 0;
    }

    .cols > ul {
      margin-left: 0;

      li {
        display: inherit;
        width: auto;
        box-sizing: content-box;
        padding-left: 0;
        padding-right: 0;

        &::before {
          content: normal;
        }
      }
    }
    // override -- legacy layout -- end

  }
}

// --- collection ---

.collection {

  // intro section
  &s--about {
    padding-top: 1.6rem;
    padding-bottom: 1.6rem;

    h1 {
      font-size: rem-calc(36);
      text-rendering: auto;
      margin-bottom: 0;
    }

    p {
      font-size: rem-calc(20);
    }
  }

  h2 {
    text-transform: uppercase;
    font-size: rem-calc(30);
    line-height: 1;
  }

  // --- collection--card ---
  &--card {
    display: grid;
    grid-template-rows: 1fr auto;
    background-color: var(--mono-900);
    border-top: 1rem solid var(--mono-500);
  }

  &--main {
    padding: 1.2rem 1.2rem 0;

    header {
      max-width: 18.25rem;

      .topic,
      .title {
        color: var(--mono-100);
      }

      .topic {
        font-size: 1rem;
        line-height: 1;
        color: var(--mono-500);
        letter-spacing: 0.15rem;
        margin-top: rem-calc(-1);
        margin-bottom: 1.2rem;
      }
    }
  }

  // topics

  .accessibility,
  .design,
  .development {
    border-top-color: var(--magenta-500);
  }

//   .development {
//     border-top-color: var(--purple-500);
//   }

  .prototyping,
  .ux-design {
    border-top-color: var(--teal-500);
  }

  .career-skills {
    border-top-color: var(--green-500);
  }

  .design-systems {
    border-top-color: var(--secondary-500);
  }

  // Main
  &--main {
    header .subhead {
      display: block;
      max-width: 24rem;
      font-size: .55rem;
      line-height: 1.35;
      color: var(--mono-100);
      letter-spacing: .05rem;
      margin-top: .75rem;
    }

    p {
      font-size: 1rem;
      color: var(--mono-300);
    }
  }

  // --- cta ---

  &--cta {
    color: var(--mono-100);
    padding: 1.2em;

    p {
      font-size: 1rem;
      margin-top: 0;
    }
  }
}

@include grid-support();
