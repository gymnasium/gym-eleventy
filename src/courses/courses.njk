---js
{
  layout: "layouts/main.njk",
  pagination: {
    data: "catalog",
    size: 1,
    alias: "item",
    resolve: "values",
    before: function(data) {
      const items = data.filter(x => x.tags.includes('course'));
      // console.log(items);
      return items;
    },
    addAllPagesToCollections: true,
  },
  permalink: "courses/{{ item.title | slugify }}/",
  eleventyComputed: {
    title: "{{ item.title }} | Courses",
    description: "{{ item.description | strip_html }}",
    sitemapDate: "{{ item.date.toISOString() }}",
    sitemapExclude: function(data) {
      const bool = data.item.sitemapExclude ? data.item.sitemapExclude : false;
      return bool;
    },
  },
}
---

<h1>{{ item.title }}</h1>
<h4>{{ item.id }}</h4>
<img src="{{config.cms_url}}{{item.img}}" alt="Image for {{item.title}}">

{%- if (not item.live) and (item.retired_message) -%}
  <p>{{ item.description }}</p>

  {%- if item.retired_message[1] -%}
    <p>{{ item.retired_message[1] | safe }}</p>
  {%- endif -%}

  {%- if item.retired_message[2] -%}
    <p>{{ item.retired_message[2] | safe }}</p>
  {%- endif -%}
{%- else -%}
  <p>{{ item.description }}</p>
{%- endif -%}