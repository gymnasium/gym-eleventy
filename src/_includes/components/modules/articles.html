{%- if module -%}
  {%- if module.heading -%}
    <h2>{{ module.heading }}</h2>
    {%- if module.description -%}
      <p>{{ module.description | safe }}</p>
    {%- endif -%}
  {%- endif -%}
  {%- set filtered = module | omit(['module', 'heading', 'description']) -%}
  {%- for id, item in filtered -%}
    <div class="{{id}}">
    {%- if module.heading -%}
      <h3>{{ item.heading }}</h3>
    {%- else -%}
      <h2>{{ item.heading }}</h2>
    {%- endif -%}
  
    {%- if item.description -%}
      <p>{{ item.description | safe }}</p>
    {%- endif -%}

    {% block links %}
      {# If we pass in data IDs, use those to fetch data directly #}
      {%- if item.ids -%}
        <ul>
          {%- for idx in range(0, item.ids.length) -%}
            {%- set path = collections.catalog[item.ids[idx].id].id | get_path -%}
            {%- set slug = collections.catalog[item.ids[idx].id].title | strip_html | slugify -%}
            {%- set title = collections.catalog[item.ids[idx].id].title | strip_html -%}
            <li><a href="{{ path }}{{ slug }}">{{ title }}</a></li>
          {%- endfor -%}
        </ul>
      {%- elseif item.links -%}
        <ul>
        {%- for idx in range(0, item.links.length) -%}
          <li>
            {# Figure out if we are using an internal or external URL #}
            {% if (item.links[idx].url | is_external_link) -%}
              {%- external_link item.links[idx].url,item.links[idx].label -%}
            {%- else -%}
              <a href="{{ item.links[idx].url }}">{{ item.links[idx].label }}</a>
            {%- endif -%}
            {%- if item.links[idx].description -%}
              <p>{{ item.links[idx].description | safe }}</p>
            {%- endif -%}
          </li>
        {%- endfor -%}
        </ul>
      {%- endif -%}
    {% endblock %}

    </div>
  {%- endfor -%}
{%- else -%}
  <em>{ Articles Module Placeholder }</em>
  <p>Pass in the `module` variable to make this work</p>
{%- endif -%}
